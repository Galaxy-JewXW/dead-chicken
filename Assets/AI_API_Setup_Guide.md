# AI API 设置指南

## 概述
本项目已集成了OpenAI API，可以实现智能对话功能。以下是设置和使用说明。

## 1. 获取API密钥

### 步骤1：注册OpenAI账户
1. 访问 [OpenAI官网](https://openai.com/)
2. 注册并登录账户
3. 完成身份验证

### 步骤2：获取API密钥
1. 登录后进入 [API Keys页面](https://platform.openai.com/api-keys)
2. 点击 "Create new secret key"
3. 输入密钥名称（如：Unity项目）
4. 复制生成的API密钥（以 `sk-` 开头）

## 2. 设置API密钥

### 方法1：环境变量（推荐）
1. 打开系统环境变量设置
2. 添加新的环境变量：
   - 变量名：`OPENAI_API_KEY`
   - 变量值：你的API密钥
3. 重启Unity编辑器

### 方法2：代码中设置
1. 在Unity中找到 `AIAPIManager` 组件
2. 在Inspector面板中设置 `API Key` 字段
3. 输入你的API密钥

## 3. 使用说明

### 基本对话
1. 点击顶栏的"AI助手"按钮
2. 在弹出的对话框中输入问题
3. 按Enter键或点击"发送"按钮
4. AI会生成回复

### 快速操作
- **系统帮助**：获取系统功能介绍
- **操作指南**：获取操作步骤指导
- **故障排除**：获取常见问题解决方案

## 4. 配置参数

### 模型选择
- `gpt-3.5-turbo`：快速响应，成本较低
- `gpt-4`：更高质量回复，成本较高

### 温度参数
- 0.0：最保守，回复最确定
- 0.7：平衡（推荐）
- 2.0：最创造性，回复最随机

### 最大Token数
- 控制单次回复的最大长度
- 建议设置：1000-2000

## 5. 故障排除

### 常见问题

**Q: 提示"API密钥未设置"**
A: 检查环境变量或代码中的API密钥设置

**Q: 提示"API请求失败"**
A: 
- 检查网络连接
- 确认API密钥有效
- 检查账户余额

**Q: 回复很慢**
A:
- 检查网络速度
- 尝试使用gpt-3.5-turbo模型
- 减少max_tokens参数

**Q: 输入框无法输入**
A:
- 确保输入框获得焦点
- 检查是否有其他UI元素遮挡

## 6. 成本控制

### 费用说明
- GPT-3.5-turbo：约$0.002/1K tokens
- GPT-4：约$0.03/1K tokens

### 节省成本的方法
1. 使用gpt-3.5-turbo模型
2. 设置合理的max_tokens限制
3. 定期清理对话历史
4. 监控API使用量

## 7. 安全注意事项

1. **不要将API密钥提交到版本控制系统**
2. **使用环境变量存储敏感信息**
3. **定期更换API密钥**
4. **监控API使用情况，防止滥用**

## 8. 技术支持

如果遇到问题，请：
1. 检查Unity控制台的错误信息
2. 查看OpenAI API文档
3. 联系技术支持

---

**注意**：使用AI API需要网络连接，请确保网络环境稳定。
