# 相机控制模块 (Camera)

> 📖 **完整使用指南请查看：[电力线可视化系统完整指南.md](../../电力线可视化系统完整指南.md#相机控制系统)**

## 概述
负责管理项目中的相机系统，包括多视角切换和相机控制逻辑。

## 文件说明

### CameraManager.cs
- **功能**: 多视角管理器
- **职责**: 
  - 管理第一人称、上帝视角、飞行视角的切换
  - 响应F1/F2/F3按键切换视角
  - 控制不同视角下的相机行为

### FirstPersonCamera.cs
- **功能**: 第一人称相机控制器
- **职责**:
  - 实现FPS风格的第一人称控制
  - 支持WASD移动、鼠标控制视角、跳跃功能
  - 包含碰撞检测和重力系统
  - 提供沉浸式的地面巡检体验

### GodViewCamera.cs
- **功能**: 上帝视角相机控制器
- **职责**:
  - 实现鸟瞰视角的拖拽和缩放控制
  - 支持鼠标滚轮缩放、右键拖拽移动
  - 提供边界限制和旋转功能
  - 适合全局结构浏览和规划设计

### FlyCamera.cs
- **功能**: 飞行相机控制器
- **职责**:
  - 实现自由飞行相机控制
  - 支持WASD移动和鼠标左键拖拽旋转
  - 提供平滑的相机移动体验

## 使用方式
1. 将CameraManager挂载到主相机上
2. 添加FirstPersonCamera、GodViewCamera、FlyCamera组件
3. 配置各个相机控制器的参数
4. 设置firstPersonView、godView、flyView的Transform位置
5. 运行时使用F1/F2/F3切换不同视角模式

## 视角详细说明

### 🧍‍♂️ 第一人称视角 (F1)
- **特点**: 模拟人眼高度观察，提供沉浸式体验
- **控制**: 
  - WASD移动
  - 鼠标控制视角方向
  - Shift加速跑
  - 空格跳跃
  - ESC切换鼠标锁定状态
- **适用场景**: 虚拟巡检、现场模拟、安全隐患查看

### 🗺️ 上帝视角 (F2)
- **特点**: 高空俯视，可拖拽和缩放
- **控制**:
  - 鼠标滚轮缩放
  - 左键/右键拖拽移动视野
  - 中键旋转视角
  - 方向键旋转（可选）
- **适用场景**: 整体线路规划、宏观走向分析

### ✈️ 飞行视角 (F3)
- **特点**: 无人机式自由飞行，无地形限制
- **控制**:
  - WASD水平移动
  - QE升降
  - 左键拖拽旋转视角
- **适用场景**: 绕线飞行检查、跨越障碍观察

## 依赖关系
- 依赖Unity的Input系统
- 与UI模块协作显示当前视角信息

## 🔍 视角切换自动寻找电塔功能

### 功能概述
- **文件位置**: `视角切换自动寻找电塔功能说明.md`
- **功能描述**: 在视角切换时自动寻找并聚焦到最近的电力塔
- **主要特性**: 
  - 智能电塔定位算法
  - 自动视角调整
  - 平滑过渡动画
  - 多视角适配

### 技术实现
- **电塔查找**: 使用距离计算和射线检测找到最近电塔
- **视角调整**: 根据不同视角模式调整相机位置和角度
- **平滑过渡**: 使用协程实现平滑的相机移动和旋转
- **边界检测**: 确保相机不会超出安全范围

### 使用场景
- **第一人称**: 切换到地面视角时自动找到最近电塔
- **上帝视角**: 切换到俯视视角时自动聚焦到电塔群
- **飞行视角**: 切换到飞行模式时自动定位到目标电塔

### 配置参数
```csharp
public float searchRadius = 100f;        // 电塔搜索半径
public float transitionDuration = 1.5f;  // 过渡动画时长
public float minDistance = 10f;          // 最小安全距离
public float maxDistance = 200f;         // 最大观察距离
``` 