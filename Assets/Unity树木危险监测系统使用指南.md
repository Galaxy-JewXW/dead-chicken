# Unity树木危险监测系统使用指南

## 🌳 系统概述

树木危险监测系统是一个完全集成到Unity主UI系统的自动化监测工具，用于检测和分析树木对电力线的潜在危险。系统考虑了树木的生长速度、高度、与电力线的距离等因素，自动评估危险等级并生成相应的警告。

## 🚀 快速开始

### 1. 系统集成
系统已经完全集成到主UI系统中，无需额外配置：
- 在Unity中运行场景
- 点击主界面中的 "🌳 树木监测" 按钮
- 系统会自动创建必要的组件和UI界面

### 2. 自动组件创建
如果场景中没有相关组件，系统会自动创建：
- `TreeDangerMonitor` - 核心监测系统
- `UIToolkitTreeDangerController` - UI控制器

## 🎯 主要功能

### 自动危险监测
- **实时监测**: 系统每5秒自动扫描场景中的树木和电力线
- **智能识别**: 自动识别树木类型、高度和生长特征
- **危险评估**: 基于多个参数计算危险等级

### 危险等级分类
- **🟢 安全 (Safe)**: 树木与电力线距离充足，无危险
- **🟡 警告 (Warning)**: 距离较近，建议定期监测
- **🟠 危险 (Critical)**: 距离过近，需要立即处理
- **🔴 紧急 (Emergency)**: 已接触或即将接触电力线

### 生长预测
- **生长率计算**: 考虑树木类型、当前高度、季节性因素
- **未来预测**: 预测30天后的危险情况
- **预警机制**: 提前发现潜在危险

## ⚙️ 系统参数配置

### 监测参数
- **监测间隔**: 5秒（可调整）
- **最大检测距离**: 100米
- **危险距离**: 3米
- **警告距离**: 8米
- **安全距离**: 15米

### 树木生长参数
- **基础生长率**: 0.1米/年
- **最大树木高度**: 50米
- **季节性因子**: 0.2

### 电力线安全参数
- **电力线高度**: 20米
- **弧垂**: 2米
- **风力摇摆因子**: 1.5

## 🎮 使用方法

### 1. 启动监测
1. 点击主界面 "🌳 树木监测" 按钮
2. 在监测控制面板中点击 "🚀 开始监测"
3. 系统开始自动监测，每5秒扫描一次

### 2. 手动监测
- 点击 "📊 手动监测" 按钮进行单次检测
- 适用于需要立即了解当前状况的场景

### 3. 参数调整
- 在UI界面中实时调整各种距离参数
- 修改生长率以适应不同树种
- 参数修改后立即生效，无需重启系统

### 4. 查看结果
- **实时统计**: 显示各危险等级的树木数量
- **详细列表**: 查看所有危险树木的详细信息
- **跳转定位**: 点击跳转按钮快速定位到危险树木

## 🔧 技术特性

### 智能识别
- 自动识别Numena植物系统中的树木
- 支持多种树木类型（柠檬树、松树、橡树等）
- 动态计算树木实际高度

### 精确计算
- 考虑水平和垂直距离
- 计算电力线弧垂和风力摇摆
- 基于树木特征的个性化生长率

### 可视化界面
- 完全集成到主UI系统
- 美观的现代化界面设计
- 响应式布局，支持不同屏幕尺寸

## 📱 UI界面说明

### 控制面板
- **参数设置**: 危险距离、警告距离、安全距离、生长率
- **控制按钮**: 开始监测、手动监测、清除标记
- **状态显示**: 实时显示系统状态信息

### 统计面板
- **危险统计**: 安全、警告、危险、紧急等级的数量
- **实时更新**: 数据自动刷新，保持最新状态

### 树木列表
- **详细信息**: 树木名称、危险等级、距离、高度、生长率
- **风险描述**: 详细的危险评估和预测信息
- **快速操作**: 跳转定位、查看详情

## 🚨 故障排除

### 系统未启动
- 检查Console是否有错误信息
- 确认场景中有树木和电力线对象
- 验证主UI系统是否正常运行

### 监测不准确
- 检查距离参数设置
- 确认树木和电力线的标签设置
- 验证坐标系统一致性

### 性能问题
- 减少监测频率
- 缩小检测范围
- 优化场景中的对象数量

### UI显示问题
- 确认SimpleUIToolkitManager组件存在
- 检查字体资源是否正确加载
- 验证UI Toolkit版本兼容性

## 🔄 系统集成

### 与现有系统兼容
- 完全兼容现有的电力线交互系统
- 集成危险标记系统
- 支持UI Toolkit界面

### 扩展性
- 可添加新的树木类型
- 支持自定义危险评估算法
- 可集成到更大的监测网络中

## 📋 最佳实践

### 性能优化
- 合理设置监测间隔（建议5-10秒）
- 适当调整最大检测距离
- 定期清理无用的危险标记

### 准确性提升
- 根据实际场景调整距离参数
- 定期校准树木高度计算
- 结合现场情况验证预测结果

### 维护建议
- 定期检查危险标记
- 及时处理高危险等级的情况
- 根据季节调整生长参数

## 🆘 技术支持

### 常见问题
1. **Q: 系统无法识别树木？**
   A: 检查树木标签设置，确保包含"tree"、"植物"等关键词

2. **Q: 监测结果不准确？**
   A: 调整距离参数，检查坐标系统一致性

3. **Q: UI界面显示异常？**
   A: 确认SimpleUIToolkitManager组件存在，检查字体资源

### 联系支持
如有问题或建议，请：
1. 查看Console日志获取详细错误信息
2. 检查系统参数设置
3. 联系开发团队获取技术支持

## 📝 更新日志

### v2.0.0 (当前版本)
- 完全集成到主UI系统
- 现代化UI界面设计
- 增强的参数控制
- 实时统计和显示
- 支持跳转定位功能

### v1.0.0
- 基础监测功能
- 危险等级评估
- 生长预测算法

---

**🌳 树木危险监测系统** - 为电力线安全保驾护航！
